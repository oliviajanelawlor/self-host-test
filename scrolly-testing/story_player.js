var Flourish=function(e){"use strict";function t(e,t,n,r,i){for(var o in e.getVersionNumber=function(){return e.version_number},e.setVersionNumber=function(t){e.version_number=t},e.id=t,e.version_number=n||0,r)e[o]=r[o];if(i)for(var o in i)e[o]=i[o]}function n(e,n,r){t(this,"object"==typeof n?(r=n).id:n,void 0,r),this.visualisation=e}function r(e,r,i){if(t(this,e,r,i),this.data_tables){var o=this;this.data_tables=this.data_tables.map((function(e){return new n(o,e)}))}}r.prototype.settingsForCurrentTemplate=function(){return this.settings&&this.template_id in this.settings?this.settings[this.template_id]:{}};var i="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),o.hasOwnProperty(t)?{space:o[t],local:e}:e}function s(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===i&&t.documentElement.namespaceURI===i?t.createElement(e):t.createElementNS(n,e)}}function l(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function c(e){var t=a(e);return(t.local?l:s)(t)}function u(){}function d(e){return null==e?u:function(){return this.querySelector(e)}}function f(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function p(){return[]}function m(e){return function(t){return t.matches(e)}}var h=Array.prototype.find;function y(){return this.firstElementChild}var g=Array.prototype.filter;function _(){return this.children}function v(e){return new Array(e.length)}function w(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function A(e){return function(){return e}}function T(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new w(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function E(e,t,n,r,i,o,a){var s,l,c,u=new Map,d=t.length,f=o.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<f;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new w(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(p[s])===l&&(i[s]=l)}function b(e){return e.__data__}function S(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function N(e){return function(){this.removeAttribute(e)}}function x(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L(e,t){return function(){this.setAttribute(e,t)}}function C(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function D(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function O(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function R(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function k(e){return function(){this.style.removeProperty(e)}}function I(e,t,n){return function(){this.style.setProperty(e,t,n)}}function M(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function F(e,t){return e.style.getPropertyValue(t)||R(e).getComputedStyle(e,null).getPropertyValue(t)}function P(e){return function(){delete this[e]}}function U(e,t){return function(){this[e]=t}}function z(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function H(e){return e.trim().split(/^|\s+/)}function B(e){return e.classList||new W(e)}function W(e){this._node=e,this._names=H(e.getAttribute("class")||"")}function G(e,t){for(var n=B(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function q(e,t){for(var n=B(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function j(e){return function(){G(this,e)}}function Y(e){return function(){q(this,e)}}function X(e,t){return function(){(t.apply(this,arguments)?G:q)(this,e)}}function $(){this.textContent=""}function V(e){return function(){this.textContent=e}}function K(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function J(){this.innerHTML=""}function Z(e){return function(){this.innerHTML=e}}function Q(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ee(){this.nextSibling&&this.parentNode.appendChild(this)}function te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ne(){return null}function re(){var e=this.parentNode;e&&e.removeChild(this)}function ie(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ae(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function se(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function le(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ce(e,t,n){var r=R(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ue(e,t){return function(){return ce(this,e,t)}}function de(e,t){return function(){return ce(this,e,t.apply(this,arguments))}}w.prototype={constructor:w,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},W.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var fe=[null];function pe(e,t){this._groups=e,this._parents=t}function me(e){return e.forEach((e=>{null!==e&&"object"==typeof e&&Object.keys(e).forEach((t=>"function"==typeof e[t]?e[t]:e[t]+=""))})),e}function he(e){if(!e||"function"!=typeof e){var t=Array.prototype.slice.call(arguments,1);if("event"===e)for(var n=0;n<t.length;n++)"object"==typeof t[n]&&"event_callback"in t[n]&&t[n].event_callback()}}function ye(e,t,n="flourish.studio"){if(!window.location.hostname.match(new RegExp(`\\.${n}$`)))return window.gtag=he;(function(e){return"string"==typeof e?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],fe)})("head").append("script").attr("async",!0).attr("src","https://www.googletagmanager.com/gtag/js?id=G-KW52XHYN9H"),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)};var r={cookie_domain:n};void 0===t?gtag("consent","default",{ad_storage:"denied",analytics_storage:"denied",functionality_storage:"denied",personalization_storage:"denied",security_storage:"denied"}):r.user_id=t.id,gtag("js",new Date),gtag("config","G-KW52XHYN9H",r),void 0!==t&&(gtag("set",{dimension1:t.id}),t.company_type?gtag("set",{dimension3:"other"==t.company_type?"corporate":t.company_type}):gtag("set",{dimension3:t.has_active_subscription?"personal":"free"}));var i=new Date;gtag("set",{dimension2:i.toISOString()});const o=document.cookie.split(";").map((e=>e.trim())).find((e=>e.startsWith("OptanonConsent=")));if(o){const e=o.substring(o.indexOf("=")+1);gtag("set",{dimension4:e})}return function(){arguments.length>=3&&"event"===arguments[0]&&(window._mfq=window._mfq||[],window._mfq.push(["setVariable",arguments[1],arguments[2]])),window.gtag.apply(window.gtag,me(Array.prototype.slice.call(arguments)));const e="C0002",t=!window.OnetrustActiveGroups||!window.OnetrustActiveGroups.includes(e);if(t)for(let e=0;e<arguments.length;e++)if(arguments[e]&&"function"==typeof arguments[e].event_callback){arguments[e].event_callback();break}}}pe.prototype={constructor:pe,select:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new pe(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:f(t)}}(e):function(e){return null==e?p:function(){return this.querySelectorAll(e)}}(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new pe(r,i)},selectChild:function(e){return this.select(null==e?y:function(e){return function(){return h.call(this.children,e)}}("function"==typeof e?e:m(e)))},selectChildren:function(e){return this.selectAll(null==e?_:function(e){return function(){return g.call(this.children,e)}}("function"==typeof e?e:m(e)))},filter:function(e){"function"!=typeof e&&(e=function(e){return function(){return this.matches(e)}}(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new pe(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,b);var n=t?E:T,r=this._parents,i=this._groups;"function"!=typeof e&&(e=A(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],d=i[c],p=d.length,m=f(e.call(u,u&&u.__data__,c,r)),h=m.length,y=s[c]=new Array(h),g=a[c]=new Array(h),_=l[c]=new Array(p);n(u,d,y,g,_,m,t);for(var v,w,S=0,N=0;S<h;++S)if(v=y[S]){for(S>=N&&(N=S+1);!(w=g[N])&&++N<h;);v._next=w||null}}return(a=new pe(a,r))._enter=s,a._exit=l,a},enter:function(){return new pe(this._enter||this._groups.map(v),this._parents)},exit:function(){return new pe(this._exit||this._groups.map(v),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof pe))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],d=c.length,f=a[s]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(f[p]=l);for(;s<r;++s)a[s]=t[s];return new pe(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=S);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new pe(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=a(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?x:N:"function"==typeof t?n.local?O:D:n.local?C:L)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?k:"function"==typeof t?M:I)(e,t,null==n?"":n)):F(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?P:"function"==typeof t?z:U)(e,t)):this.node()[e]},classed:function(e,t){var n=H(e+"");if(arguments.length<2){for(var r=B(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?X:t?j:Y)(n,t))},text:function(e){return arguments.length?this.each(null==e?$:("function"==typeof e?K:V)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?J:("function"==typeof e?Q:Z)(e)):this.node().innerHTML},raise:function(){return this.each(ee)},lower:function(){return this.each(te)},append:function(e){var t="function"==typeof e?e:c(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:c(e),r=null==t?ne:"function"==typeof t?t:d(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(re)},clone:function(e){return this.select(e?oe:ie)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=ae(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?le:se,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?de:ue)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var ge,_e,ve,we,Ae=!1,Te=!1,Ee=null,be=!1;function Se(){this._current_time=0,this.paused=!0,this._listeners=[]}function Ne(){var e=document.querySelector(".play-pause.small"),t=document.querySelector(".play-pause.large");if(t)if(e){e=e.getBoundingClientRect();var n=getComputedStyle(t),r=parseInt(n.left,10),i=parseInt(n.top,10),o=null;requestAnimationFrame((function n(a){null==o&&(o=a);var s=a-o,l=Math.min(1,Math.max(0,s/1e3)),c=51*(1-l),u=51*(1-l),d=51*(1-l),f=1-l+.3*l,p=-50*(1-l)+"%",m=-50*(1-l)+"%",h=2.5*(1-l)+1*l;t.style.left=r*(1-l)+(e.left||0)*l+"px",t.style.top=i*(1-l)+(e.top||0)*l+"px",t.style.transform="translate("+p+","+m+") scale("+h+")",t.style.background="rgba("+c+","+u+","+d+","+f+")",l<1?requestAnimationFrame(n):t.parentNode.removeChild(t)}))}else t.parentNode.removeChild(t)}function xe(){_e.paused?Le():Ce()}function Le(){if(De(_e.currentTime)>=ge.story.slides.length)_e.currentTime=0;else{const e=ge.current_slide.index,t=we[e];_e.currentTime=t}_e.play();for(var e=document.querySelectorAll("nav .play-pause"),t=0;t<e.length;t++)e[t].classList.add("playing");Te||Ne(),Te=!0}function Ce(){_e.pause();for(var e=document.querySelectorAll("nav .play-pause"),t=0;t<e.length;t++)e[t].classList.remove("playing")}function De(e){for(var t=we.length-1;t>=0;t--)if(e>=we[t])return t}function Oe(){var e=De(this.currentTime);ge.current_slide.index!==e?e!==Ee&&(e<ge.story.slides.length?(Ae=ve(e),Ee=e):(Ce(),ge.story.loops_at_end&&Le())):Ee=null}function Re(){_e&&_e.removeEventListener("timeupdate",Oe),(ge.story.is_timed||be)&&"scrolly"!==ge.story.presentation_mode?(_e=ge.story.audio_url?document.getElementById("story-audio-file"):new Se).addEventListener("timeupdate",Oe):_e=null}function ke(){var e=0;we=[0];for(var t=0;t<ge.story.slides.length;t++){var n=ge.story.slides[t];e+=null==n.duration?ge.story.default_slide_duration:n.duration,we.push(e)}}function Ie(e){_e&&(Ae?Ae=!1:_e.currentTime=we[e])}Se.prototype={get currentTime(){return this._current_time},set currentTime(e){void 0!==this._played_from&&(this._played_from+=e-this._current_time),this._current_time=e}},Se.prototype.addEventListener=function(e,t){if("timeupdate"!==e)throw new Error("Event type unsupported - must be timeupdate, not "+e);this._listeners.push(t)},Se.prototype.removeEventListener=function(e,t){if("timeupdate"!==e)throw new Error("Event type unsupported - must be timeupdate, not "+e);this._listeners=[]},Se.prototype.play=function(){var e=this;this.paused=!1,this._played_from=e._current_time,this._t0=null,requestAnimationFrame((function t(n){e.paused||((null==e._t0||n<e._t0)&&(e._t0=n),e._current_time=Math.max(0,e._played_from+(n-e._t0)/1e3),e._listeners.forEach((function(t){t.call(e)})),requestAnimationFrame(t))})),Te||Ne(),Te=!0},Se.prototype.pause=function(){this.paused=!0};
/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */
const{entries:Me,setPrototypeOf:Fe,isFrozen:Pe,getPrototypeOf:Ue,getOwnPropertyDescriptor:ze}=Object;let{freeze:He,seal:Be,create:We}=Object,{apply:Ge,construct:qe}="undefined"!=typeof Reflect&&Reflect;He||(He=function(e){return e}),Be||(Be=function(e){return e}),Ge||(Ge=function(e,t,n){return e.apply(t,n)}),qe||(qe=function(e,t){return new e(...t)});const je=at(Array.prototype.forEach),Ye=at(Array.prototype.lastIndexOf),Xe=at(Array.prototype.pop),$e=at(Array.prototype.push),Ve=at(Array.prototype.splice),Ke=at(String.prototype.toLowerCase),Je=at(String.prototype.toString),Ze=at(String.prototype.match),Qe=at(String.prototype.replace),et=at(String.prototype.indexOf),tt=at(String.prototype.trim),nt=at(Object.prototype.hasOwnProperty),rt=at(RegExp.prototype.test),it=(ot=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qe(ot,t)});var ot;function at(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ge(e,t,r)}}function st(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ke;Fe&&Fe(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(Pe(t)||(t[r]=e),i=e)}e[i]=!0}return e}function lt(e){for(let t=0;t<e.length;t++){nt(e,t)||(e[t]=null)}return e}function ct(e){const t=We(null);for(const[n,r]of Me(e)){nt(e,n)&&(Array.isArray(r)?t[n]=lt(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=ct(r):t[n]=r)}return t}function ut(e,t){for(;null!==e;){const n=ze(e,t);if(n){if(n.get)return at(n.get);if("function"==typeof n.value)return at(n.value)}e=Ue(e)}return function(){return null}}const dt=He(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ft=He(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pt=He(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mt=He(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ht=He(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yt=He(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gt=He(["#text"]),_t=He(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vt=He(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wt=He(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),At=He(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Tt=Be(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Et=Be(/<%[\w\W]*|[\w\W]*%>/gm),bt=Be(/\$\{[\w\W]*/gm),St=Be(/^data-[\-\w.\u00B7-\uFFFF]+$/),Nt=Be(/^aria-[\-\w]+$/),xt=Be(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Lt=Be(/^(?:\w+script|data):/i),Ct=Be(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Dt=Be(/^html$/i),Ot=Be(/^[a-z][.\w]*(-[.\w]+)+$/i);var Rt=Object.freeze({__proto__:null,ARIA_ATTR:Nt,ATTR_WHITESPACE:Ct,CUSTOM_ELEMENT:Ot,DATA_ATTR:St,DOCTYPE_NAME:Dt,ERB_EXPR:Et,IS_ALLOWED_URI:xt,IS_SCRIPT_OR_DATA:Lt,MUSTACHE_EXPR:Tt,TMPLIT_EXPR:bt});const kt=1,It=3,Mt=7,Ft=8,Pt=9,Ut=function(){return"undefined"==typeof window?null:window},zt=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var Ht,Bt,Wt=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut();const n=t=>e(t);if(n.version="3.2.4",n.removed=[],!t||!t.document||t.document.nodeType!==Pt||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const i=r,o=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=t,h=c.prototype,y=ut(h,"cloneNode"),g=ut(h,"remove"),_=ut(h,"nextSibling"),v=ut(h,"childNodes"),w=ut(h,"parentNode");if("function"==typeof s){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let A,T="";const{implementation:E,createNodeIterator:b,createDocumentFragment:S,getElementsByTagName:N}=r,{importNode:x}=i;let L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof Me&&"function"==typeof w&&E&&void 0!==E.createHTMLDocument;const{MUSTACHE_EXPR:C,ERB_EXPR:D,TMPLIT_EXPR:O,DATA_ATTR:R,ARIA_ATTR:k,IS_SCRIPT_OR_DATA:I,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:F}=Rt;let{IS_ALLOWED_URI:P}=Rt,U=null;const z=st({},[...dt,...ft,...pt,...ht,...gt]);let H=null;const B=st({},[..._t,...vt,...wt,...At]);let W=Object.seal(We(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),G=null,q=null,j=!0,Y=!0,X=!1,$=!0,V=!1,K=!0,J=!1,Z=!1,Q=!1,ee=!1,te=!1,ne=!1,re=!0,ie=!1;const oe="user-content-";let ae=!0,se=!1,le={},ce=null;const ue=st({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const fe=st({},["audio","video","img","source","image","track"]);let pe=null;const me=st({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),he="http://www.w3.org/1998/Math/MathML",ye="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let _e=ge,ve=!1,we=null;const Ae=st({},[he,ye,ge],Je);let Te=st({},["mi","mo","mn","ms","mtext"]),Ee=st({},["annotation-xml"]);const be=st({},["title","style","font","a","script"]);let Se=null;const Ne=["application/xhtml+xml","text/html"],xe="text/html";let Le=null,Ce=null;const De=r.createElement("form"),Oe=function(e){return e instanceof RegExp||e instanceof Function},Re=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ce||Ce!==e){if(e&&"object"==typeof e||(e={}),e=ct(e),Se=-1===Ne.indexOf(e.PARSER_MEDIA_TYPE)?xe:e.PARSER_MEDIA_TYPE,Le="application/xhtml+xml"===Se?Je:Ke,U=nt(e,"ALLOWED_TAGS")?st({},e.ALLOWED_TAGS,Le):z,H=nt(e,"ALLOWED_ATTR")?st({},e.ALLOWED_ATTR,Le):B,we=nt(e,"ALLOWED_NAMESPACES")?st({},e.ALLOWED_NAMESPACES,Je):Ae,pe=nt(e,"ADD_URI_SAFE_ATTR")?st(ct(me),e.ADD_URI_SAFE_ATTR,Le):me,de=nt(e,"ADD_DATA_URI_TAGS")?st(ct(fe),e.ADD_DATA_URI_TAGS,Le):fe,ce=nt(e,"FORBID_CONTENTS")?st({},e.FORBID_CONTENTS,Le):ue,G=nt(e,"FORBID_TAGS")?st({},e.FORBID_TAGS,Le):{},q=nt(e,"FORBID_ATTR")?st({},e.FORBID_ATTR,Le):{},le=!!nt(e,"USE_PROFILES")&&e.USE_PROFILES,j=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,X=e.ALLOW_UNKNOWN_PROTOCOLS||!1,$=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,V=e.SAFE_FOR_TEMPLATES||!1,K=!1!==e.SAFE_FOR_XML,J=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,P=e.ALLOWED_URI_REGEXP||xt,_e=e.NAMESPACE||ge,Te=e.MATHML_TEXT_INTEGRATION_POINTS||Te,Ee=e.HTML_INTEGRATION_POINTS||Ee,W=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Oe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Oe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),V&&(Y=!1),te&&(ee=!0),le&&(U=st({},gt),H=[],!0===le.html&&(st(U,dt),st(H,_t)),!0===le.svg&&(st(U,ft),st(H,vt),st(H,At)),!0===le.svgFilters&&(st(U,pt),st(H,vt),st(H,At)),!0===le.mathMl&&(st(U,ht),st(H,wt),st(H,At))),e.ADD_TAGS&&(U===z&&(U=ct(U)),st(U,e.ADD_TAGS,Le)),e.ADD_ATTR&&(H===B&&(H=ct(H)),st(H,e.ADD_ATTR,Le)),e.ADD_URI_SAFE_ATTR&&st(pe,e.ADD_URI_SAFE_ATTR,Le),e.FORBID_CONTENTS&&(ce===ue&&(ce=ct(ce)),st(ce,e.FORBID_CONTENTS,Le)),ae&&(U["#text"]=!0),J&&st(U,["html","head","body"]),U.table&&(st(U,["tbody"]),delete G.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw it('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw it('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=e.TRUSTED_TYPES_POLICY,T=A.createHTML("")}else void 0===A&&(A=zt(m,o)),null!==A&&"string"==typeof T&&(T=A.createHTML(""));He&&He(e),Ce=e}},ke=st({},[...ft,...pt,...mt]),Ie=st({},[...ht,...yt]),Fe=function(e){let t=w(e);t&&t.tagName||(t={namespaceURI:_e,tagName:"template"});const n=Ke(e.tagName),r=Ke(t.tagName);return!!we[e.namespaceURI]&&(e.namespaceURI===ye?t.namespaceURI===ge?"svg"===n:t.namespaceURI===he?"svg"===n&&("annotation-xml"===r||Te[r]):Boolean(ke[n]):e.namespaceURI===he?t.namespaceURI===ge?"math"===n:t.namespaceURI===ye?"math"===n&&Ee[r]:Boolean(Ie[n]):e.namespaceURI===ge?!(t.namespaceURI===ye&&!Ee[r])&&(!(t.namespaceURI===he&&!Te[r])&&(!Ie[n]&&(be[n]||!ke[n]))):!("application/xhtml+xml"!==Se||!we[e.namespaceURI]))},Pe=function(e){$e(n.removed,{element:e});try{w(e).removeChild(e)}catch(t){g(e)}},Ue=function(e,t){try{$e(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){$e(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Pe(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},ze=function(e){let t=null,n=null;if(Q)e="<remove></remove>"+e;else{const t=Ze(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Se&&_e===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=A?A.createHTML(e):e;if(_e===ge)try{t=(new p).parseFromString(i,Se)}catch(e){}if(!t||!t.documentElement){t=E.createDocument(_e,"template",null);try{t.documentElement.innerHTML=ve?T:i}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),_e===ge?N.call(t,J?"html":"body")[0]:J?t.documentElement:o},Be=function(e){return b.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Ge=function(e){return e instanceof f&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},qe=function(e){return"function"==typeof l&&e instanceof l};function ot(e,t,r){je(e,(e=>{e.call(n,t,r,Ce)}))}const at=function(e){let t=null;if(ot(L.beforeSanitizeElements,e,null),Ge(e))return Pe(e),!0;const r=Le(e.nodeName);if(ot(L.uponSanitizeElement,e,{tagName:r,allowedTags:U}),e.hasChildNodes()&&!qe(e.firstElementChild)&&rt(/<[/\w]/g,e.innerHTML)&&rt(/<[/\w]/g,e.textContent))return Pe(e),!0;if(e.nodeType===Mt)return Pe(e),!0;if(K&&e.nodeType===Ft&&rt(/<[/\w]/g,e.data))return Pe(e),!0;if(!U[r]||G[r]){if(!G[r]&&Tt(r)){if(W.tagNameCheck instanceof RegExp&&rt(W.tagNameCheck,r))return!1;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(r))return!1}if(ae&&!ce[r]){const t=w(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=y(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,_(e))}}}return Pe(e),!0}return e instanceof c&&!Fe(e)?(Pe(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!rt(/<\/no(script|embed|frames)/i,e.innerHTML)?(V&&e.nodeType===It&&(t=e.textContent,je([C,D,O],(e=>{t=Qe(t,e," ")})),e.textContent!==t&&($e(n.removed,{element:e.cloneNode()}),e.textContent=t)),ot(L.afterSanitizeElements,e,null),!1):(Pe(e),!0)},lt=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in De))return!1;if(Y&&!q[t]&&rt(R,t));else if(j&&rt(k,t));else if(!H[t]||q[t]){if(!(Tt(e)&&(W.tagNameCheck instanceof RegExp&&rt(W.tagNameCheck,e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(e))&&(W.attributeNameCheck instanceof RegExp&&rt(W.attributeNameCheck,t)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(t))||"is"===t&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&rt(W.tagNameCheck,n)||W.tagNameCheck instanceof Function&&W.tagNameCheck(n))))return!1}else if(pe[t]);else if(rt(P,Qe(n,M,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==et(n,"data:")||!de[e]){if(X&&!rt(I,Qe(n,M,"")));else if(n)return!1}else;return!0},Tt=function(e){return"annotation-xml"!==e&&Ze(e,F)},Et=function(e){ot(L.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Ge(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let i=t.length;for(;i--;){const o=t[i],{name:a,namespaceURI:s,value:l}=o,c=Le(a);let u="value"===a?l:tt(l);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,ot(L.uponSanitizeAttribute,e,r),u=r.attrValue,!ie||"id"!==c&&"name"!==c||(Ue(a,e),u=oe+u),K&&rt(/((--!?|])>)|<\/(style|title)/i,u)){Ue(a,e);continue}if(r.forceKeepAttr)continue;if(Ue(a,e),!r.keepAttr)continue;if(!$&&rt(/\/>/i,u)){Ue(a,e);continue}V&&je([C,D,O],(e=>{u=Qe(u,e," ")}));const d=Le(e.nodeName);if(lt(d,c,u)){if(A&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(s);else switch(m.getAttributeType(d,c)){case"TrustedHTML":u=A.createHTML(u);break;case"TrustedScriptURL":u=A.createScriptURL(u)}try{s?e.setAttributeNS(s,a,u):e.setAttribute(a,u),Ge(e)?Pe(e):Xe(n.removed)}catch(e){}}}ot(L.afterSanitizeAttributes,e,null)},bt=function e(t){let n=null;const r=Be(t);for(ot(L.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)ot(L.uponSanitizeShadowNode,n,null),at(n),Et(n),n.content instanceof a&&e(n.content);ot(L.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,s=null,c=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!=typeof e&&!qe(e)){if("function"!=typeof e.toString)throw it("toString is not a function");if("string"!=typeof(e=e.toString()))throw it("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Z||Re(t),n.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){const t=Le(e.nodeName);if(!U[t]||G[t])throw it("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=ze("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),o.nodeType===kt&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!ee&&!V&&!J&&-1===e.indexOf("<"))return A&&ne?A.createHTML(e):e;if(r=ze(e),!r)return ee?null:ne?T:""}r&&Q&&Pe(r.firstChild);const u=Be(se?e:r);for(;s=u.nextNode();)at(s),Et(s),s.content instanceof a&&bt(s.content);if(se)return e;if(ee){if(te)for(c=S.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(H.shadowroot||H.shadowrootmode)&&(c=x.call(i,c,!0)),c}let d=J?r.outerHTML:r.innerHTML;return J&&U["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&rt(Dt,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),V&&je([C,D,O],(e=>{d=Qe(d,e," ")})),A&&ne?A.createHTML(d):d},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Re(e),Z=!0},n.clearConfig=function(){Ce=null,Z=!1},n.isValidAttribute=function(e,t,n){Ce||Re({});const r=Le(e),i=Le(t);return lt(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&$e(L[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=Ye(L[e],t);return-1===n?void 0:Ve(L[e],n,1)[0]}return Xe(L[e])},n.removeHooks=function(e){L[e]=[]},n.removeAllHooks=function(){L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();function Gt(e){if(!e)return!1;var t=e.tagName;if("TEXTAREA"===t||"INPUT"===t)return!0;for(;e.parentNode;){if(e.isContentEditable)return!0;e=e.parentNode}return!1}function qt(e){Gt(e.target)||32!=e.keyCode&&38!=e.keyCode&&40!=e.keyCode&&33!=e.keyCode&&34!=e.keyCode||e.preventDefault()}function jt(e){Gt(e.target)||(39!=e.keyCode&&40!=e.keyCode&&32!=e.keyCode&&34!=e.keyCode||Bt(),37!=e.keyCode&&38!=e.keyCode&&33!=e.keyCode||Ht())}function Yt(e){null==e&&(e="");var t=document.querySelector(".story-furniture .caption");t&&(t.innerHTML=Wt.sanitize(e))}Wt.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))}));var Xt=!1;function $t(e){if(Xt&&window.top!==window.self){var t=window;"srcdoc"===t.location.pathname&&(t=t.parent);var n,r=(n={},window._Flourish_template_id&&(n.template_id=window._Flourish_template_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_template_id&&(n.template_id=window.Flourish.app.loaded_template_id),window._Flourish_visualisation_id&&(n.visualisation_id=window._Flourish_visualisation_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_visualisation&&(n.visualisation_id=window.Flourish.app.loaded_visualisation.id),window.Flourish&&window.Flourish.app&&window.Flourish.app.story&&(n.story_id=window.Flourish.app.story.id,n.slide_count=window.Flourish.app.story.slides.length),window.Flourish&&window.Flourish.app&&window.Flourish.app.current_slide&&(n.slide_index=window.Flourish.app.current_slide.index+1),n),i={sender:"Flourish",method:"customerAnalytics"};for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);t.parent.postMessage(JSON.stringify(i),"*")}}function Vt(e){if("function"!=typeof e)throw new Error("Analytics callback is not a function");window.Flourish._analytics_listeners.push(e)}function Kt(){Xt=!0;[{event_name:"click",action_name:"click",use_capture:!0},{event_name:"keydown",action_name:"key_down",use_capture:!0},{event_name:"mouseenter",action_name:"mouse_enter",use_capture:!1},{event_name:"mouseleave",action_name:"mouse_leave",use_capture:!1}].forEach((function(e){document.body.addEventListener(e.event_name,(function(){$t({action:e.action_name})}),e.use_capture)}))}
/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Jt,setPrototypeOf:Zt,isFrozen:Qt,getPrototypeOf:en,getOwnPropertyDescriptor:tn}=Object;let{freeze:nn,seal:rn,create:on}=Object,{apply:an,construct:sn}="undefined"!=typeof Reflect&&Reflect;nn||(nn=function(e){return e}),rn||(rn=function(e){return e}),an||(an=function(e,t,n){return e.apply(t,n)}),sn||(sn=function(e,t){return new e(...t)});const ln=Tn(Array.prototype.forEach),cn=Tn(Array.prototype.lastIndexOf),un=Tn(Array.prototype.pop),dn=Tn(Array.prototype.push),fn=Tn(Array.prototype.splice),pn=Tn(String.prototype.toLowerCase),mn=Tn(String.prototype.toString),hn=Tn(String.prototype.match),yn=Tn(String.prototype.replace),gn=Tn(String.prototype.indexOf),_n=Tn(String.prototype.trim),vn=Tn(Object.prototype.hasOwnProperty),wn=Tn(RegExp.prototype.test),An=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sn(e,n)}}(TypeError);function Tn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return an(e,t,r)}}function En(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pn;Zt&&Zt(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(Qt(t)||(t[r]=e),i=e)}e[i]=!0}return e}function bn(e){for(let t=0;t<e.length;t++){vn(e,t)||(e[t]=null)}return e}function Sn(e){const t=on(null);for(const[n,r]of Jt(e)){vn(e,n)&&(Array.isArray(r)?t[n]=bn(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=Sn(r):t[n]=r)}return t}function Nn(e,t){for(;null!==e;){const n=tn(e,t);if(n){if(n.get)return Tn(n.get);if("function"==typeof n.value)return Tn(n.value)}e=en(e)}return function(){return null}}const xn=nn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ln=nn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Cn=nn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Dn=nn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),On=nn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Rn=nn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kn=nn(["#text"]),In=nn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Mn=nn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fn=nn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pn=nn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Un=rn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),zn=rn(/<%[\w\W]*|[\w\W]*%>/gm),Hn=rn(/\$\{[\w\W]*/gm),Bn=rn(/^data-[\-\w.\u00B7-\uFFFF]+$/),Wn=rn(/^aria-[\-\w]+$/),Gn=rn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),qn=rn(/^(?:\w+script|data):/i),jn=rn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Yn=rn(/^html$/i),Xn=rn(/^[a-z][.\w]*(-[.\w]+)+$/i);var $n=Object.freeze({__proto__:null,ARIA_ATTR:Wn,ATTR_WHITESPACE:jn,CUSTOM_ELEMENT:Xn,DATA_ATTR:Bn,DOCTYPE_NAME:Yn,ERB_EXPR:zn,IS_ALLOWED_URI:Gn,IS_SCRIPT_OR_DATA:qn,MUSTACHE_EXPR:Un,TMPLIT_EXPR:Hn});const Vn=1,Kn=3,Jn=7,Zn=8,Qn=9,er=function(){return"undefined"==typeof window?null:window},tr=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var nr,rr,ir,or,ar,sr,lr,cr,ur,dr=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er();const n=t=>e(t);if(n.version="3.2.4",n.removed=[],!t||!t.document||t.document.nodeType!==Qn||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const i=r,o=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=t,h=c.prototype,y=Nn(h,"cloneNode"),g=Nn(h,"remove"),_=Nn(h,"nextSibling"),v=Nn(h,"childNodes"),w=Nn(h,"parentNode");if("function"==typeof s){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let A,T="";const{implementation:E,createNodeIterator:b,createDocumentFragment:S,getElementsByTagName:N}=r,{importNode:x}=i;let L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof Jt&&"function"==typeof w&&E&&void 0!==E.createHTMLDocument;const{MUSTACHE_EXPR:C,ERB_EXPR:D,TMPLIT_EXPR:O,DATA_ATTR:R,ARIA_ATTR:k,IS_SCRIPT_OR_DATA:I,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:F}=$n;let{IS_ALLOWED_URI:P}=$n,U=null;const z=En({},[...xn,...Ln,...Cn,...On,...kn]);let H=null;const B=En({},[...In,...Mn,...Fn,...Pn]);let W=Object.seal(on(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),G=null,q=null,j=!0,Y=!0,X=!1,$=!0,V=!1,K=!0,J=!1,Z=!1,Q=!1,ee=!1,te=!1,ne=!1,re=!0,ie=!1;const oe="user-content-";let ae=!0,se=!1,le={},ce=null;const ue=En({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const fe=En({},["audio","video","img","source","image","track"]);let pe=null;const me=En({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),he="http://www.w3.org/1998/Math/MathML",ye="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let _e=ge,ve=!1,we=null;const Ae=En({},[he,ye,ge],mn);let Te=En({},["mi","mo","mn","ms","mtext"]),Ee=En({},["annotation-xml"]);const be=En({},["title","style","font","a","script"]);let Se=null;const Ne=["application/xhtml+xml","text/html"],xe="text/html";let Le=null,Ce=null;const De=r.createElement("form"),Oe=function(e){return e instanceof RegExp||e instanceof Function},Re=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ce||Ce!==e){if(e&&"object"==typeof e||(e={}),e=Sn(e),Se=-1===Ne.indexOf(e.PARSER_MEDIA_TYPE)?xe:e.PARSER_MEDIA_TYPE,Le="application/xhtml+xml"===Se?mn:pn,U=vn(e,"ALLOWED_TAGS")?En({},e.ALLOWED_TAGS,Le):z,H=vn(e,"ALLOWED_ATTR")?En({},e.ALLOWED_ATTR,Le):B,we=vn(e,"ALLOWED_NAMESPACES")?En({},e.ALLOWED_NAMESPACES,mn):Ae,pe=vn(e,"ADD_URI_SAFE_ATTR")?En(Sn(me),e.ADD_URI_SAFE_ATTR,Le):me,de=vn(e,"ADD_DATA_URI_TAGS")?En(Sn(fe),e.ADD_DATA_URI_TAGS,Le):fe,ce=vn(e,"FORBID_CONTENTS")?En({},e.FORBID_CONTENTS,Le):ue,G=vn(e,"FORBID_TAGS")?En({},e.FORBID_TAGS,Le):{},q=vn(e,"FORBID_ATTR")?En({},e.FORBID_ATTR,Le):{},le=!!vn(e,"USE_PROFILES")&&e.USE_PROFILES,j=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,X=e.ALLOW_UNKNOWN_PROTOCOLS||!1,$=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,V=e.SAFE_FOR_TEMPLATES||!1,K=!1!==e.SAFE_FOR_XML,J=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,P=e.ALLOWED_URI_REGEXP||Gn,_e=e.NAMESPACE||ge,Te=e.MATHML_TEXT_INTEGRATION_POINTS||Te,Ee=e.HTML_INTEGRATION_POINTS||Ee,W=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Oe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Oe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),V&&(Y=!1),te&&(ee=!0),le&&(U=En({},kn),H=[],!0===le.html&&(En(U,xn),En(H,In)),!0===le.svg&&(En(U,Ln),En(H,Mn),En(H,Pn)),!0===le.svgFilters&&(En(U,Cn),En(H,Mn),En(H,Pn)),!0===le.mathMl&&(En(U,On),En(H,Fn),En(H,Pn))),e.ADD_TAGS&&(U===z&&(U=Sn(U)),En(U,e.ADD_TAGS,Le)),e.ADD_ATTR&&(H===B&&(H=Sn(H)),En(H,e.ADD_ATTR,Le)),e.ADD_URI_SAFE_ATTR&&En(pe,e.ADD_URI_SAFE_ATTR,Le),e.FORBID_CONTENTS&&(ce===ue&&(ce=Sn(ce)),En(ce,e.FORBID_CONTENTS,Le)),ae&&(U["#text"]=!0),J&&En(U,["html","head","body"]),U.table&&(En(U,["tbody"]),delete G.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw An('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw An('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=e.TRUSTED_TYPES_POLICY,T=A.createHTML("")}else void 0===A&&(A=tr(m,o)),null!==A&&"string"==typeof T&&(T=A.createHTML(""));nn&&nn(e),Ce=e}},ke=En({},[...Ln,...Cn,...Dn]),Ie=En({},[...On,...Rn]),Me=function(e){let t=w(e);t&&t.tagName||(t={namespaceURI:_e,tagName:"template"});const n=pn(e.tagName),r=pn(t.tagName);return!!we[e.namespaceURI]&&(e.namespaceURI===ye?t.namespaceURI===ge?"svg"===n:t.namespaceURI===he?"svg"===n&&("annotation-xml"===r||Te[r]):Boolean(ke[n]):e.namespaceURI===he?t.namespaceURI===ge?"math"===n:t.namespaceURI===ye?"math"===n&&Ee[r]:Boolean(Ie[n]):e.namespaceURI===ge?!(t.namespaceURI===ye&&!Ee[r])&&(!(t.namespaceURI===he&&!Te[r])&&(!Ie[n]&&(be[n]||!ke[n]))):!("application/xhtml+xml"!==Se||!we[e.namespaceURI]))},Fe=function(e){dn(n.removed,{element:e});try{w(e).removeChild(e)}catch(t){g(e)}},Pe=function(e,t){try{dn(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){dn(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Fe(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ue=function(e){let t=null,n=null;if(Q)e="<remove></remove>"+e;else{const t=hn(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Se&&_e===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=A?A.createHTML(e):e;if(_e===ge)try{t=(new p).parseFromString(i,Se)}catch(e){}if(!t||!t.documentElement){t=E.createDocument(_e,"template",null);try{t.documentElement.innerHTML=ve?T:i}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),_e===ge?N.call(t,J?"html":"body")[0]:J?t.documentElement:o},ze=function(e){return b.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},He=function(e){return e instanceof f&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Be=function(e){return"function"==typeof l&&e instanceof l};function We(e,t,r){ln(e,(e=>{e.call(n,t,r,Ce)}))}const Ge=function(e){let t=null;if(We(L.beforeSanitizeElements,e,null),He(e))return Fe(e),!0;const r=Le(e.nodeName);if(We(L.uponSanitizeElement,e,{tagName:r,allowedTags:U}),e.hasChildNodes()&&!Be(e.firstElementChild)&&wn(/<[/\w]/g,e.innerHTML)&&wn(/<[/\w]/g,e.textContent))return Fe(e),!0;if(e.nodeType===Jn)return Fe(e),!0;if(K&&e.nodeType===Zn&&wn(/<[/\w]/g,e.data))return Fe(e),!0;if(!U[r]||G[r]){if(!G[r]&&je(r)){if(W.tagNameCheck instanceof RegExp&&wn(W.tagNameCheck,r))return!1;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(r))return!1}if(ae&&!ce[r]){const t=w(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=y(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,_(e))}}}return Fe(e),!0}return e instanceof c&&!Me(e)?(Fe(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!wn(/<\/no(script|embed|frames)/i,e.innerHTML)?(V&&e.nodeType===Kn&&(t=e.textContent,ln([C,D,O],(e=>{t=yn(t,e," ")})),e.textContent!==t&&(dn(n.removed,{element:e.cloneNode()}),e.textContent=t)),We(L.afterSanitizeElements,e,null),!1):(Fe(e),!0)},qe=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in De))return!1;if(Y&&!q[t]&&wn(R,t));else if(j&&wn(k,t));else if(!H[t]||q[t]){if(!(je(e)&&(W.tagNameCheck instanceof RegExp&&wn(W.tagNameCheck,e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(e))&&(W.attributeNameCheck instanceof RegExp&&wn(W.attributeNameCheck,t)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(t))||"is"===t&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&wn(W.tagNameCheck,n)||W.tagNameCheck instanceof Function&&W.tagNameCheck(n))))return!1}else if(pe[t]);else if(wn(P,yn(n,M,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==gn(n,"data:")||!de[e]){if(X&&!wn(I,yn(n,M,"")));else if(n)return!1}else;return!0},je=function(e){return"annotation-xml"!==e&&hn(e,F)},Ye=function(e){We(L.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||He(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let i=t.length;for(;i--;){const o=t[i],{name:a,namespaceURI:s,value:l}=o,c=Le(a);let u="value"===a?l:_n(l);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,We(L.uponSanitizeAttribute,e,r),u=r.attrValue,!ie||"id"!==c&&"name"!==c||(Pe(a,e),u=oe+u),K&&wn(/((--!?|])>)|<\/(style|title)/i,u)){Pe(a,e);continue}if(r.forceKeepAttr)continue;if(Pe(a,e),!r.keepAttr)continue;if(!$&&wn(/\/>/i,u)){Pe(a,e);continue}V&&ln([C,D,O],(e=>{u=yn(u,e," ")}));const d=Le(e.nodeName);if(qe(d,c,u)){if(A&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(s);else switch(m.getAttributeType(d,c)){case"TrustedHTML":u=A.createHTML(u);break;case"TrustedScriptURL":u=A.createScriptURL(u)}try{s?e.setAttributeNS(s,a,u):e.setAttribute(a,u),He(e)?Fe(e):un(n.removed)}catch(e){}}}We(L.afterSanitizeAttributes,e,null)},Xe=function e(t){let n=null;const r=ze(t);for(We(L.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)We(L.uponSanitizeShadowNode,n,null),Ge(n),Ye(n),n.content instanceof a&&e(n.content);We(L.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,s=null,c=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Be(e)){if("function"!=typeof e.toString)throw An("toString is not a function");if("string"!=typeof(e=e.toString()))throw An("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Z||Re(t),n.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){const t=Le(e.nodeName);if(!U[t]||G[t])throw An("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=Ue("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),o.nodeType===Vn&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!ee&&!V&&!J&&-1===e.indexOf("<"))return A&&ne?A.createHTML(e):e;if(r=Ue(e),!r)return ee?null:ne?T:""}r&&Q&&Fe(r.firstChild);const u=ze(se?e:r);for(;s=u.nextNode();)Ge(s),Ye(s),s.content instanceof a&&Xe(s.content);if(se)return e;if(ee){if(te)for(c=S.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(H.shadowroot||H.shadowrootmode)&&(c=x.call(i,c,!0)),c}let d=J?r.outerHTML:r.innerHTML;return J&&U["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&wn(Yn,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),V&&ln([C,D,O],(e=>{d=yn(d,e," ")})),A&&ne?A.createHTML(d):d},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Re(e),Z=!0},n.clearConfig=function(){Ce=null,Z=!1},n.isValidAttribute=function(e,t,n){Ce||Re({});const r=Le(e),i=Le(t);return qe(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&dn(L[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=cn(L[e],t);return-1===n?void 0:fn(L[e],n,1)[0]}return un(L[e])},n.removeHooks=function(e){L[e]=[]},n.removeAllHooks=function(){L={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();function fr(){if(null==nr){var e=function(){var e=window.location;"about:srcdoc"==e.href&&(e=window.parent.location);var t={};return function(e,n,r){for(;r=n.exec(e);)t[decodeURIComponent(r[1])]=decodeURIComponent(r[2])}(e.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),t}();nr="referrer"in e?/^https:\/\/medium.com\//.test(e.referrer):!("auto"in e)}return nr}function pr(e){var t=e||window.innerWidth;return t>999?650:t>599?575:400}function mr(e){if(e&&window.top!==window.self){var t=window;"srcdoc"==t.location.pathname&&(t=t.parent);var n={sender:"Flourish",method:"scrolly",captions:e.captions,hasScrollyTransformFix:e.hasScrollyTransformFix};t.parent.postMessage(JSON.stringify(n),"*")}}function hr(e,t){if(window.top!==window.self){var n=window;if("srcdoc"==n.location.pathname&&(n=n.parent),rr)return e=parseInt(e,10),void n.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*");var r={sender:"Flourish",context:"iframe.resize",method:"resize",height:e,src:n.location.toString()};if(t)for(var i in t)r[i]=t[i];n.parent.postMessage(JSON.stringify(r),"*")}}function yr(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function gr(e){return"string"==typeof e||e instanceof String}function _r(e){return"warn"!==e.method?(console.warn("BUG: validateWarnMessage called for method"+e.method),!1):!(null!=e.message&&!gr(e.message))&&!(null!=e.explanation&&!gr(e.explanation))}function vr(e){return"resize"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!gr(e.src)&&(!!gr(e.context)&&!!("number"==typeof(t=e.height)?!isNaN(t)&&t>=0:gr(t)&&/\d/.test(t)&&/^[0-9]*(\.[0-9]*)?(cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%)?$/i.test(t)));var t}function wr(e){throw new Error("Validation for setSetting is not implemented yet; see issue #4328")}function Ar(e){return"scrolly"!==e.method?(console.warn("BUG: validateScrolly called for method"+e.method),!1):!!Array.isArray(e.captions)}function Tr(e){return"customerAnalytics"===e.method||(console.warn("BUG: validateCustomerAnalyticsMessage called for method"+e.method),!1)}function Er(e){return"request-upload"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!gr(e.name)&&!(null!=e.accept&&!gr(e.accept))}function br(e,t,n){var r=function(e){for(var t={warn:_r,resize:vr,setSetting:wr,customerAnalytics:Tr,"request-upload":Er,scrolly:Ar},n={},r=0;r<e.length;r++){var i=e[r];if(!t[i])throw new Error("No validator found for method "+i);n[i]=t[i]}return n}(t);window.addEventListener("message",(function(t){var i=function(){if(t.origin==document.location.origin)return!0;if(n){const e=t.origin.toLowerCase();if(n=n.toLowerCase(),e.endsWith("//"+n))return!0;if(e.endsWith("."+n))return!0}return!!t.origin.match(/\/\/localhost:\d+$|\/\/(?:public|app)\.flourish.devlocal$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$|\/\/flourish-user-templates\.com$/)}();if(null!=t.source&&i){var o;try{o="object"==typeof t.data?t.data:JSON.parse(t.data)}catch(e){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(t.data))}if("Flourish"===o.sender)if(o.method)if(Object.prototype.hasOwnProperty.call(r,o.method))if(r[o.method](o)){for(var a=document.querySelectorAll("iframe"),s=0;s<a.length;s++)if(a[s].contentWindow==t.source||a[s].contentWindow==t.source.parent)return void e(o,a[s]);console.warn("could not find frame",o)}else console.warn("Validation failed for the message",o);else console.warn("No validator implemented for message",o);else console.warn("The 'method' property was missing from message",o)}})),yr()&&(window.addEventListener("resize",Sr),Sr())}function Sr(){for(var e=document.querySelectorAll(".flourish-embed"),t=0;t<e.length;t++){var n=e[t];if(!n.getAttribute("data-width")){var r=n.querySelector("iframe");if(r){var i=window.getComputedStyle(n),o=n.offsetWidth-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight);r.style.width=o+"px"}}}}function Nr(e,t,n){var r=e.parentNode;if(r.classList.contains("fl-scrolly-wrapper"))return void console.warn("createScrolly is being called more than once per story. This should not happen.");r.classList.add("fl-scrolly-wrapper"),r.style.position="relative",r.style.paddingBottom="1px",r.style.transform="translate3d(0, 0, 0)";const i=navigator.platform.indexOf("Win")>-1,o=!!window.chrome&&(navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Edg")>-1||navigator.userAgent.indexOf("OPR")>-1);if(i&&o&&n){let e,t=0;window.addEventListener("scroll",(function(){clearTimeout(e),e=setTimeout((()=>{t=0===t?1:0,r.style.transform=`translateZ(${t}px)`}),100)}))}e.style.position="sticky";var a=r.getAttribute("data-height")||null;a||(a="80vh",e.style.height=a),e.style.top="calc(50vh - "+a+"/2)";var s=r.querySelector(".flourish-credit");s&&(s.style.position="sticky",s.style.top="calc(50vh + "+a+"/2)"),t.forEach((function(e,t){var n="string"==typeof e&&""!=e.trim(),i=document.createElement("div");i.setAttribute("data-slide",t),i.classList.add("fl-scrolly-caption"),i.style.position="relative",i.style.transform="translate3d(0,0,0)",i.style.textAlign="center",i.style.maxWidth="500px",i.style.height="auto",i.style.marginTop="0",i.style.marginBottom=n?"100vh":"50vh",i.style.marginLeft="auto",i.style.marginRight="auto";var o=document.createElement("div");o.innerHTML=dr.sanitize(e,{ADD_ATTR:["target"]}),o.style.visibility=n?"":"hidden",o.style.display="inline-block",o.style.paddingTop="1.25em",o.style.paddingRight="1.25em",o.style.paddingBottom="1.25em",o.style.paddingLeft="1.25em",o.style.background="rgba(255,255,255,0.9)",o.style.boxShadow="0px 0px 10px rgba(0,0,0,0.2)",o.style.borderRadius="10px",o.style.textAlign="center",o.style.maxWidth="100%",o.style.margin="0 20px",o.style.overflowX="hidden",i.appendChild(o),r.appendChild(i)})),function(e){for(var t=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting){var n=e.querySelector("iframe");n&&(n.src=n.src.replace(/#slide-.*/,"")+"#slide-"+t.target.getAttribute("data-slide"))}}))}),{rootMargin:"0px 0px -0% 0px"}),n=e.querySelectorAll(".fl-scrolly-caption"),r=0;r<n.length;r++)t.observe(n[r]);e.querySelectorAll(".fl-scrolly-caption img").forEach((function(e){e.style.maxWidth="100%"}))}(r)}function xr(e,t,n,r,i){var o=document.createElement("iframe");if(o.setAttribute("scrolling","no"),o.setAttribute("frameborder","0"),o.setAttribute("title","Interactive or visual content"),o.setAttribute("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),t.appendChild(o),o.offsetParent||"fixed"===getComputedStyle(o).position)Lr(e,t,o,n,r,i);else{var a={embed_url:e,container:t,iframe:o,width:n,height:r,play_on_load:i};if(window._flourish_poll_items?window._flourish_poll_items.push(a):window._flourish_poll_items=[a],window._flourish_poll_items.length>1)return o;var s=setInterval((function(){window._flourish_poll_items=window._flourish_poll_items.filter((function(e){return!e.iframe.offsetParent||(Lr(e.embed_url,e.container,e.iframe,e.width,e.height,e.play_on_load),!1)})),window._flourish_poll_items.length||clearInterval(s)}),500)}return o}function Lr(e,t,n,r,i,o){var a;return r&&"number"==typeof r?(a=r,r+="px"):r&&r.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(a=parseFloat(r)),i&&"number"==typeof i&&(i+="px"),r?n.style.width=r:yr()?n.style.width=t.offsetWidth+"px":n.style.width="100%",!!i||(e.match(/\?/)?e+="&auto=1":e+="?auto=1",i=pr(a||n.offsetWidth)+"px"),i&&("%"===i.charAt(i.length-1)&&(i=parseFloat(i)/100*t.parentNode.offsetHeight+"px"),n.style.height=i),n.setAttribute("src",e+(o?"#play-on-load":"")),n}function Cr(){return rr="#amp=1"==window.location.hash,{createEmbedIframe:xr,isFixedHeight:fr,getHeightForBreakpoint:pr,startEventListeners:br,notifyParentWindow:hr,initScrolly:mr,createScrolly:Nr,isSafari:yr,initCustomerAnalytics:Kt,addAnalyticsListener:Vt,sendCustomerAnalyticsMessage:$t}}function Dr(e){var t=Object.create(null);for(var n in e){for(var r=t,i=n.indexOf("."),o=0;i>=0;i=n.indexOf(".",o=i+1)){var a=n.substring(o,i);a in r||(r[a]=Object.create(null)),r=r[a]}r[n.substring(o)]=e[n]}return t}function Or(e){if(null==e)return e;var t,n=Object.create(null);for(var r in e){const i=e[r];Array.isArray(i)?n[r]=i.slice():(t=e[r],Array.isArray(t)||"object"!=typeof t||null==t?n[r]=e[r]:n[r]=Or(e[r]))}return n}var Rr,kr=null;function Ir(){return"MessageChannel"in window}var Mr=null;function Fr(){Mr&&ir.removeEventListener("load",Mr),Mr=null}function Pr(e){Fr(),ir.addEventListener("load",e),Mr=e}function Ur(e,t,n){return ii(!1),ur=e?e.visualisation?e.visualisation:e.current_slide.visualisation:null,kr=null,ur&&ur.template_id?(Pr(function(e,t,n){var r=e.visualisation?e.visualisation.template_id:e.current_slide.visualisation.template_id,i=e.current_slide?e.current_slide.id:null;return function(){!ur||ur.template_id!=r||e.current_slide&&e.current_slide.id!==i||(Fr(),Yr((function(o,a){o?console.error("Failed to get default state"):!ur||ur.template_id!=r||e.current_slide&&e.current_slide.id!==i||Xr((function(o,s){if(o)console.error("Failed to call hasData");else if(ur&&ur.template_id==r&&(!e.current_slide||e.current_slide.id===i)){var l=!1;e.visualisation&&(l=e.data_bindings.requiredBindingsAreUnset()),s?ur.refreshDataBindings((function(o){o?console.error("Failed to refresh data bindings"):!ur||ur.template_id!=r||e.current_slide&&e.current_slide.id!==i||ur.prepareData((function(o,s){o?console.error("Failed to prepare data for template"):!ur||ur.template_id!=r||e.current_slide&&e.current_slide.id!==i||ni({data:s,state:t,draw:!l},(function(e,t){kr=a,n(e,t)}))}))})):ni({state:t,draw:!l},(function(e,t){kr=a,n(e,t)}))}}))})))}}(e,t,n)),ir.src="/template/"+ur.template_id+"/embed/?auto=1&environment="+or+"&is_read_only="+(e.is_read_only?"1":"0"),ir):(Fr(),ir.src="about:blank",ir)}function zr(e){Yr((function(t,n){t?console.error("Failed to get default state"):(kr=n,e())}))}function Hr(e,t){var n=e.template_id;e.refreshDataBindings((function(r){r?console.error("Failed to fetch data bindings"):e.prepareData((function(e,r){if(ur&&ur.template_id==n)return e?(console.error("Failed to prepare data for template"),void t(e)):void t(void 0,r)}))}))}function Br(e,t){Hr(e,(function(e,n){if(e)return t(e);ni({data:n,update:!0},t)}))}function Wr(e,t){Hr(e,(function(e,n){if(e)return t(e);ni({data:n,update:!1},t)}))}function Gr(e,t,n){Hr(e,(function(e,r){if(e)return n(e);ni({data:r,state:t,overwrite_state:!0,update:!0},n)}))}function qr(e,t,n,r=ir){if(Ir()){var i=new MessageChannel;i.port1.onmessage=function(e){var t=e.data;if("string"==typeof t){if(!n)return;return n(void 0,JSON.parse(t))}if("object"==typeof t){if("result"in t){if(!n)return;return n(void 0,t.result)}if("error"in t){if(!n)return;return n(t.error)}console.error("Unrecognised response to message",t)}else console.error("Unrecognised response to message",t)},r.contentWindow.postMessage({sender:"Flourish",method:e,argument:t},"*",[i.port2])}}function jr(e,t){qr("setState",Dr(e),t)}function Yr(e,t){"function"!=typeof e?qr("getState",e,t):qr("getState",void 0,e)}function Xr(e){qr("hasData",void 0,e)}function $r(e,t){qr("setData",e,t)}function Vr(e){qr("getData",void 0,e)}function Kr(e){qr("draw",void 0,e),ii(!0)}function Jr(e){lr&&lr.clear(),ri()&&qr("update",void 0,e)}function Zr(e,t,n){qr("snapshot",e,t,n)}function Qr(){return Or(kr)}function ei(e,t){qr("setFixedHeight",e,t)}function ti(e){if(ir.parentNode.offsetWidth){if(void 0!==e)Rr=null!=e;else if(Rr)return;var t=e||sr&&sr.responsive_menu&&sr.responsive_menu.getHeightSetting()||ar.getHeightForBreakpoint(ir.offsetWidth),n=typeof t;("number"===n||"string"===n&&!isNaN(t))&&(t+="px"),ir.style.height=t}}function ni(e,t,n=ir){ri()?delete e.draw:e.draw&&ii(!0),e.state&&(e.state=Dr(e.state)),lr&&lr.clear(),qr("sync",e,(function(n,r){null!=n||"success"!==r?(e.draw&&ii(!1),function n(r){r?t&&t(r):function(e,t){return e.data?($r(e.data,t),delete e.data,!1):e.state?(jr(e.state,t),delete e.state,!1):e.draw?(Kr(t),delete e.draw,!1):!e.update||(Jr(t),delete e.update,!1)}(e,n)&&t&&t(void 0)}(n)):t&&t(void 0)}),n)}function ri(){return cr}function ii(e){cr=e}function oi(e,t,n,r,i){return ir=document.querySelector(e),or=t,sr=n,lr=r,i||(i={}),ar=Cr(),ir.style.height=ar.getHeightForBreakpoint(ir.offsetWidth)+"px",ar.startEventListeners((function(e){"resize"==e.method?ti(e.height):"warn"==e.method?(lr&&lr.warn(e),console.warn("Warning from template:",e.message,e.explanation)):e.method in i&&i[e.method](e)}),["resize","warn","customerAnalytics","setSetting","request-upload"]),Ir()||function(e){if(e){var t=document.createElement("div");t.className="unsupported-notice",t.innerHTML="<h3>Please update your browser</h3><p>This page only works with newer versions of your browser.</p>",e.appendChild(t)}}(ir.parentNode),{loadVisualisation:Ur,updateData:Br,updateDataAndState:Gr,updateDataNotPreview:Wr,setState:jr,getState:Yr,getDefaultState:Qr,hasData:Xr,setData:$r,getData:Vr,draw:Kr,update:Jr,snapshot:Zr,setFixedHeight:ei,resize:ti,sync:ni,getDrawCalled:ri,setDrawCalled:ii,setFrameLoadListener:Pr,updateDefaultState:zr}}var ai,si,li;function ci(e,t){for(var n in t)"object"!=typeof e[n]||null==e[n]||Array.isArray(e[n])||"object"!=typeof t[n]||null==t[n]||Array.isArray(t[n])?e[n]=t[n]:ci(e[n],t[n])}function ui(e,t,n,r,i,o,a,s,l){var c=this;c.story=e,c.visualisations=t,c.data=n,c.frame=document.querySelector("#story iframe"),c.template_paths=r||{},c.enable_customer_analytics=a,c.can_use_scrolly_transform_fix=s,c.auto_resize="scrolly"!=c.story.presentation_mode&&!si.isFixedHeight(),c.state="INIT",o?c.analytics=window.gtag=he:(c.analytics=ye(e.id,i,l),c.analytics("event","story",{play:e.id}));var u,d,f=window.location.hash,p=(f&&f.match(/^#play-on-load/)||c.story.is_timed&&c.story.plays_on_load)&&"scrolly"!=c.story.presentation_mode;if(e.slides.length>0){for(var m=0;m<e.slides.length;m++){var h=e.slides[m];h.visualisation_id&&(h.visualisation=t[h.visualisation_id])}f&&"#amp=1"!=f&&!p||(window.location.hash="#slide-0"),c.loadSlideFromHash()}function y(){c.previous()}function g(){c.next()}!function(e,t){Ht=e,Bt=t}(y,g),window.addEventListener("keydown",qt),window.addEventListener("keyup",jt),c.auto_resize?(u=document.querySelector("iframe"),d=u.offsetHeight,si.startEventListeners((function(e){"resize"===e.method&&e.height!==d&&("number"!=typeof(d=e.height)&&(d=parseInt(d,10)),u.style.height=d+"px",hi(u.offsetHeight+yi()))}),["resize"])):c.updateHeight(),c.auto_resize||window.addEventListener("resize",(function(){c.updateHeight()}));var _=!0;ge=c,be=p,ve=function(e){return window.location.hash="#slide-"+e,!0},Re(),ke(),li={update:Re,play:Le,pause:Ce,playPause:xe,updateTimecodes:ke,jumpToSlide:Ie};var v=document.querySelector(".first");v&&v.addEventListener("click",(function(){c.first()}));var w=document.querySelector(".previous");w&&w.addEventListener("click",y);var A=document.querySelectorAll(".play-pause");for(m=0;m<A.length;m++)A[m].addEventListener("click",(function(e){_&&(_=!1,li.jumpToSlide(c.current_slide.index)),li.playPause(),si.sendCustomerAnalyticsMessage({action:e.target.classList.contains("playing")?"play":"pause"})}));var T=document.querySelector(".next");T&&T.addEventListener("click",g);var E=document.querySelector(".last");E&&E.addEventListener("click",(function(){c.last()})),p&&function(e){if(!li)return;var t=document.querySelector(".play-pause.large");t&&t.parentNode&&t.parentNode.removeChild(t);document.querySelector("iframe").addEventListener("load",(function(){e()&&li.play()}),!0)}((()=>_))}ui.prototype.dispatchEvent=function(e,t){switch(e){case"slideChange":this.eventSlideChange(t);break;case"templateLoaded":this.eventTemplateLoaded(t);break;case"defaultStateFetched":this.eventDefaultStateFetched(t);break;case"syncDone":this.eventSyncDone(t);break;case"fadedOut":this.eventFadedOut(t);break;default:throw new Error("Unrecognised event: "+e)}},ui.prototype.eventSlideChange=function(e){var t=this,n=e.slide_index;n<0&&(n=0),n>=t.story.slides.length&&(n=t.story.slides.length-1);var r=t.current_slide,i=t.template_id;t.current_slide=t.story.slides[n];var o=t.current_slide.visualisation;switch(t.template_id=o&&o.template_id,t.state){case"LOADING_TEMPLATE":case"FETCHING_DEFAULT_STATE":if(t.template_id==i)break;case"INIT":case"EMPTY_SLIDE":if(!t.template_id){t.state="EMPTY_SLIDE",t.frame.src="about:blank",Yt(t.current_slide.caption_text);break}t.state="LOADING_TEMPLATE",t.loadTemplate();break;case"EMPTY_STORY":throw new Error("We cannot change slide in an empty story");case"FADING_OUT":break;case"SYNCING_SLIDE":case"READY":if(t.current_slide==r)return;if(t.template_id!=i){t.state="FADING_OUT",t.fadeFrameOut();break}t.state="SYNCING_SLIDE";var a=r.visualisation!==t.current_slide.visualisation;t.drawOrUpdateSlide("update",a,n);break;default:throw new Error("Unknown state: "+this.state)}t.updateControls(),t.updateSlideCount(),this.analytics("event","story",{load_slide:n}),si.sendCustomerAnalyticsMessage({action:"change_slide",slide_index:n+1})},ui.prototype.eventTemplateLoaded=function(e){var t=this,n=e.template_id;"LOADING_TEMPLATE"==t.state&&t.template_id==n&&(t.state="FETCHING_DEFAULT_STATE",t.fadeFrameIn(),ai.updateDefaultState((function(){t.dispatchEvent("defaultStateFetched",{template_id:n})})))},ui.prototype.eventDefaultStateFetched=function(e){var t=this,n=e.template_id;"FETCHING_DEFAULT_STATE"==t.state&&t.template_id==n&&(t.state="SYNCING_SLIDE",t.drawOrUpdateSlide("draw",!0,t.current_slide.index))},ui.prototype.eventSyncDone=function(e){var t=this,n=e.slide_index;"SYNCING_SLIDE"==t.state&&t.current_slide.index==n&&(t.state="READY")},ui.prototype.eventFadedOut=function(){var e=this;if("FADING_OUT"==e.state){if(!e.template_id)return e.state="EMPTY_SLIDE",e.frame.src="about:blank",void Yt(e.current_slide.caption_text);e.state="LOADING_TEMPLATE",e.loadTemplate()}},ui.prototype.loadTemplate=function(){var e=this,t=e.template_id;ai.setDrawCalled(!1);var n=e.template_paths[t]||"/template/"+t+"/embed";n+="?environment=story_player",e.auto_resize&&(n+="&auto=1"),e.enable_customer_analytics&&(n+="&enable_customer_analytics=1"),ai.setFrameLoadListener((function(){e.dispatchEvent("templateLoaded",{template_id:t})})),e.frame.src=n},ui.prototype.drawOrUpdateSlide=function(e,t,n){var r=this;Yt(r.current_slide.caption_text),r.populateStateAndData(e,t,(function(){r.dispatchEvent("syncDone",{slide_index:n})})),r.updateHeight()},ui.prototype.noSlidesBefore=function(){return!this.current_slide||this.current_slide.index<1},ui.prototype.noSlidesAfter=function(){return!this.current_slide||this.current_slide.index==this.story.slides.length-1},ui.prototype.previous=function(){if(!this.noSlidesBefore()){this.analytics("event","story",{previous:this.current_slide.index});var e=this.current_slide.index-1;window.location.hash="#slide-"+e}},ui.prototype.next=function(){if(!this.noSlidesAfter()){this.analytics("event","story",{next:this.current_slide.index});var e=this.current_slide.index+1;window.location.hash="#slide-"+e}},ui.prototype.first=function(){this.noSlidesBefore()||(this.analytics("event","story",{first:this.current_slide.index}),window.location.hash="#slide-0")},ui.prototype.last=function(){this.noSlidesAfter()||(this.analytics("event","story",{last:this.current_slide.index}),window.location.hash="#slide-"+(this.story.slides.length-1))},ui.prototype.populateStateAndData=function(e,t,n){var r=this.current_slide,i=r.visualisation,o={};ci(o,ai.getDefaultState()),ci(o,Dr(i.settingsForCurrentTemplate())),ci(o,r.state);var a={state:o,overwrite_state:!0};t&&(a.data=this.data[i.id]),a[e]=!0,ai.sync(a,n)};var di=null;function fi(){di&&(cancelAnimationFrame(di),di=null)}ui.prototype.fadeFrameOut=function(){var e=this;fi();var t=null,n=function(r){null==t&&(t=r);var i=r-t,o=Math.min(1,Math.max(0,i/250));e.frame.style.opacity=1-o,1==o?(di=null,e.dispatchEvent("fadedOut",{})):di=requestAnimationFrame(n)};di=requestAnimationFrame(n)},ui.prototype.fadeFrameIn=function(){var e=this;fi();var t=null,n=function(r){null==t&&(t=r);var i=r-t,o=Math.min(1,Math.max(0,i/250));e.frame.style.opacity=o,di=1==o?null:requestAnimationFrame(n)};di=requestAnimationFrame(n)};var pi=null;function mi(){pi||(pi={furniture:document.querySelector(".story-furniture"),progress:document.querySelector(".progress span, .progress-indicator .progress"),previous:document.querySelector(".previous"),next:document.querySelector(".next"),first:document.querySelector(".first"),last:document.querySelector(".last"),count_current:document.querySelector(".count .current, .count-current"),count_total:document.querySelector(".count .total, .count-total")})}function hi(e){e&&si.notifyParentWindow(e,{player:!0})}function yi(){var e=0,t=document.querySelector(".story-furniture");return t&&"absolute"!==getComputedStyle(t).position&&(e=t.offsetHeight),e}return ui.prototype.updateControls=function(){var e,t=this,n=t.current_slide;e=t.story.slides.length<2?0:n.index/(t.story.slides.length-1),mi(),pi.progress&&(pi.progress.style.width=100*e+"%"),document.querySelector("nav")?(t.noSlidesBefore()?(pi.previous.setAttribute("disabled",""),pi.first.setAttribute("disabled","")):(pi.previous.removeAttribute("disabled"),pi.first.removeAttribute("disabled")),t.noSlidesAfter()?(pi.next.setAttribute("disabled",""),pi.last.setAttribute("disabled","")):(pi.next.removeAttribute("disabled"),pi.last.removeAttribute("disabled"))):(t.noSlidesBefore()?(pi.previous&&pi.previous.classList.add("disabled"),pi.first&&pi.first.classList.add("disabled")):(pi.previous&&pi.previous.classList.remove("disabled"),pi.first&&pi.first.classList.remove("disabled")),t.noSlidesAfter()?(pi.next&&pi.next.classList.add("disabled"),pi.last&&pi.last.classList.add("disabled")):(pi.next&&pi.next.classList.remove("disabled"),pi.last&&pi.last.classList.remove("disabled"))),pi.furniture&&(null!=n&&n.caption_text?pi.furniture.classList.add("has-caption"):pi.furniture.classList.remove("has-caption"))},ui.prototype.updateSlideCount=function(){mi(),pi.count_current&&(pi.count_current.innerHTML=this.current_slide.index+1),pi.count_total&&(pi.count_total.innerHTML=this.story.slides.length)},ui.prototype.loadSlideFromHash=function(){var e=window.location.hash;if(e&&e.match(/^#slide-/)){var t=parseInt(e.substr("#slide-".length),10);this.dispatchEvent("slideChange",{slide_index:t})}},ui.prototype.updateHeight=function(){var e=document.querySelector("iframe");if(this.auto_resize){hi(e.offsetHeight+yi())}else{var t=document.body.offsetHeight-yi();t!==e.offsetHeight&&(e.style.height=t+"px")}},e.Slide=function(e,n,r){this.story=e,t(this,n,void 0,r)},e.Story=function(e,n,r,i,o){t(this,e,n,r),this.slides=i,this.slides_by_id={};for(var a=0;a<i.length;a++){var s=i[a];s.story=this,this.slides_by_id[s.id]=s}this.status=o},e.Visualisation=r,e.initStoryPlayer=function(e,t,n,r,i,o,a,s,l){ai=oi("#story iframe","story_player",void 0,void 0,{customerAnalytics:function(e){"mouse_enter"!==e.action&&"mouse_leave"!==e.action&&si.sendCustomerAnalyticsMessage(e)}}),si=Cr(),a&&si.initCustomerAnalytics(),window.Flourish=window.Flourish||{};var c=window.Flourish.app=new ui(t,n,r,i,e,o,a,s,l);if(window.addEventListener("hashchange",(function(){c.loadSlideFromHash()})),"scrolly"==t.presentation_mode){const e=t.slides.map((function(e){var t=e.caption_text?e.caption_text.replace(/<p>/g,'<p style="margin: 0">'):"";return Wt.sanitize(t)}));si.initScrolly({captions:e,hasScrollyTransformFix:c.can_use_scrolly_transform_fix})}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
